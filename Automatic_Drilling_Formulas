I use the following formulas in QC:

To make these work you have to add the "Set Value" device and add the "Manual Tare" variable to this device. The Depth Tracking - Source must be set to RigWatch. The Slip Setpoint needs to be set to 60.

The overall operation of these formulas is that it your block position will start at 200 and count down towards 0, when it reaches 10 the hookload will drop to a number less than 60 and this will trigger the Block Position to reset to 200 and the process starts again. Setting the "Manual Tare" variable to OFF will stop the drilling process, and setting it back to ON will resume the process.â€‹

Block_Position:
'Returns a count down from 200 to 0 when Manual Tare is set to ON and Hookload is greater than 60
'Resets the count down when hookload is below 60
'Note this formula uses the Hookload variable and not the formula directly.
Integer(Timer([Manual Tare],IF([Hookload]<60,1,0),20000,0,2))/100

Hook_load:
'When Block Position is less than 10, returns a value below 60 (-10 accuracy)
'When Block Position is above 10, returns a value of 200 (-10 accuracy)
'Note this formula uses the Block Position variable and not the formula directly.
If([Block Position]<10,60-(rand()*10),200-(rand()*10))


I also have formulas for  Pump Pressure and Return Flow (these are not required to simulate drilling):

Pump_Pressure:
'Assumes 2500 is half of your High End Pump Pressure calibration (5000)
'Assumes your Pump Pressure Minimum Value in the Depth Tracking menu is set to 100
'Note this formula uses the Hookload variable and not the formula directly.
IF([Hookload]<60,100-(rand()*10),2500-(rand()*100))

Return_Flow
'Assumes that your High End Pump Pressure calibration is 5000
'Accounts for a 35% returning accuracy
'Note this formula uses the Hookload and Pump Pressure variables an not the formulas directly.
IF([Hookload]<60,0,(([Pump Pressure]/5000)*100)*0.35)

The following formulas can be used with an Auto Remark set up to trigger if the Dynamic Variable mapped to the "Auto_Remark" formula exceeds a value of 0.99

Auto_Remark_Trigger:
'Triggers a true value when a random value between 0 and 1 is greater than 0.9
IF(rand()>0.9,1,0)

Auto_Remark:
'Triggers a rand value between 0 and 1 when the Auto Remark Trigger returns a true value.
'Effectively reduces the triggering of the first formula by 10%
IF([Auto_Remark_Trigger]>0,rand(),0)
